<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ñ–∏–≤–æ–µ –¥–µ—Ä–µ–≤–æ ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∏–≥—Ä–∞ —Ä–æ—Å—Ç–∞</title>
  <style>
    :root {
      color-scheme: dark;
      font-family: 'Segoe UI', 'Manrope', system-ui, -apple-system, sans-serif;
      background-color: #030712;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      overflow: hidden;
      color: #f5f7fb;
      background: radial-gradient(120% 120% at 50% 10%, #182244 0%, #050914 65%, #03040a 100%);
    }

    canvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      display: block;
    }

    .hud {
      position: absolute;
      top: 32px;
      left: 64px;
      z-index: 2;
      max-width: 520px;
      backdrop-filter: blur(18px);
      background: rgba(5, 10, 21, 0.45);
      border: 1px solid rgba(182, 233, 255, 0.18);
      border-radius: 28px;
      padding: 28px 32px;
      box-shadow: 0 25px 60px rgba(8, 12, 32, 0.65);
    }

    .hud h1 {
      font-size: clamp(32px, 4vw, 44px);
      font-weight: 600;
      line-height: 1.2;
      margin-bottom: 12px;
      letter-spacing: -0.01em;
    }

    .hud p {
      font-size: 16px;
      line-height: 1.6;
      color: rgba(245, 247, 251, 0.85);
      margin-bottom: 20px;
    }

    .hud button {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 14px 24px;
      font-size: 15px;
      letter-spacing: 0.02em;
      border-radius: 999px;
      border: 1px solid rgba(181, 255, 217, 0.45);
      background: linear-gradient(120deg, rgba(141, 255, 195, 0.25), rgba(63, 192, 255, 0.2));
      color: #e6fff5;
      font-weight: 600;
      cursor: pointer;
      transition: transform 200ms ease, box-shadow 200ms ease, background 200ms ease;
    }

    .hud button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 26px rgba(0, 255, 184, 0.25);
      background: linear-gradient(120deg, rgba(141, 255, 195, 0.35), rgba(63, 192, 255, 0.35));
    }

    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-top: 12px;
    }

    .stat-card {
      min-width: 120px;
      padding: 12px 16px;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }

    .stat-card span {
      display: block;
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 6px;
    }

    .stat-card strong {
      font-size: 18px;
      font-weight: 600;
    }

    .footer-note {
      position: absolute;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%);
      padding: 12px 24px;
      border-radius: 999px;
      background: rgba(4, 9, 22, 0.65);
      border: 1px solid rgba(255, 255, 255, 0.12);
      backdrop-filter: blur(18px);
      font-size: 15px;
      letter-spacing: 0.01em;
    }

    @media (max-width: 768px) {
      .hud {
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: calc(100% - 32px);
      }

      .footer-note {
        width: calc(100% - 32px);
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <canvas id="treeCanvas"></canvas>

  <header class="hud">
    <h1>–ü–æ—Å–∞–¥–∏ —Ü–∏—Ñ—Ä–æ–≤–æ–µ –¥–µ—Ä–µ–≤–æ –∏ –Ω–∞–±–ª—é–¥–∞–π –∂–∏–≤–æ–π —Ä–æ—Å—Ç</h1>
    <p>
      –ö–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ —Å–∏–ª—ã –ø—Ä–∏—Ä–æ–¥—ã –¥–æ–±–∞–≤–ª—è—é—Ç –Ω–æ–≤—ã–µ –≤–µ—Ç–≤–∏, –ª–∏—Å—Ç—å—è –∏ –æ—Ç—Ç–µ–Ω–∫–∏. –ü–æ–ª–∏–≤–∞–π –¥–µ—Ä–µ–≤–æ, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –µ–≥–æ —Ä–æ—Å—Ç,
      –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è –º–µ–¥–∏—Ç–∞—Ü–∏–µ–π –∂–∏–≤–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.
    </p>
    <button id="waterBtn" type="button" aria-label="–ü–æ–ª–∏—Ç—å –¥–µ—Ä–µ–≤–æ">
      üíß –ü–æ–ª–∏—Ç—å –¥–µ—Ä–µ–≤–æ
    </button>

    <div class="stats">
      <div class="stat-card">
        <span>–í–æ–∑—Ä–∞—Å—Ç</span>
        <strong data-age>0.0 –ª–µ—Ç</strong>
      </div>
      <div class="stat-card">
        <span>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</span>
        <strong data-mood>–ì–ª—É–±–æ–∫–∏–π —Å–æ–Ω</strong>
      </div>
      <div class="stat-card">
        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–æ—Å—Ç–∞</span>
        <strong data-stage>0%</strong>
      </div>
    </div>
  </header>

  <div class="footer-note" data-hint>
    –ó–∞–ø—É—Å—Ç–∏ –¥–µ—Ä–µ–≤–æ –∏ –¥–æ–∂–¥–∏—Å—å –ø–µ—Ä–≤—ã—Ö –≤–µ—Ç–≤–µ–π ‚Äî –∫–∞–∂–¥–∞—è –≤–æ–ª–Ω–∞ —Ä–æ—Å—Ç–∞ –¥–ª–∏—Ç—Å—è 3‚Äì5 —Å–µ–∫—É–Ω–¥.
  </div>

  <script>
    (() => {
      const canvas = document.getElementById('treeCanvas');
      const ctx = canvas.getContext('2d');

      const ageEl = document.querySelector('[data-age]');
      const moodEl = document.querySelector('[data-mood]');
      const stageEl = document.querySelector('[data-stage]');
      const hintEl = document.querySelector('[data-hint]');
      const waterBtn = document.getElementById('waterBtn');

      let width = 0;
      let height = 0;

      const MAX_DEPTH = 7;
      const GROWTH_DELAY_PER_LEVEL = 0.09;

      let growth = 0.02;
      let targetGrowth = 0.18;
      let lastTime = 0;
      let simulatedAge = 0;
      let season = Math.random() * Math.PI * 2;
      let wind = 0;
      let windTarget = 0;

      const moods = ['–ì–ª—É–±–æ–∫–∏–π —Å–æ–Ω', '–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ', '–†–æ—Å—Ç', '–ü–æ–ª—ë—Ç –≤–µ—Ç–≤–µ–π', '–¶–≤–µ—Ç–µ–Ω–∏–µ', '–°–æ–∑—Ä–µ–≤–∞–Ω–∏–µ'];

      let tree = null;

      function buildTree() {
        const baseLength = Math.min(width, height) * 0.23;
        return createBranch(0, baseLength, 0, 1);
      }

      function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        tree = buildTree();
      }

      window.addEventListener('resize', resize);
      resize();

      function clamp(value, min, max) {
        return Math.min(max, Math.max(min, value));
      }

      function easeOutCubic(t) {
        return 1 - Math.pow(1 - t, 3);
      }

      function seededRandom(seed) {
        return (Math.sin(seed * 9999) + 1) / 2;
      }

      function createBranch(depth, length, angle, seed) {
        const branch = { depth, length, angle, seed, children: [] };
        if (depth >= MAX_DEPTH) {
          return branch;
        }

        const spread = 0.28 + seededRandom(seed + 1) * 0.3;
        const lenFactor = 0.67 + seededRandom(seed + 2) * 0.12 - depth * 0.015;
        const lean = (seededRandom(seed + 3) - 0.5) * 0.2;

        branch.children.push(
          createBranch(depth + 1, length * lenFactor, angle + spread + lean, seed * 1.93 + 1)
        );
        branch.children.push(
          createBranch(depth + 1, length * lenFactor, angle - spread + lean, seed * 1.93 + 2)
        );

        if (depth > 1 && seededRandom(seed + 4) > 0.55) {
          const variance = (seededRandom(seed + 5) - 0.5) * spread;
          branch.children.push(
            createBranch(depth + 1, length * (lenFactor * 0.92), angle + variance, seed * 1.93 + 3)
          );
        }

        return branch;
      }

      function updateHud() {
        ageEl.textContent = `${(simulatedAge / 2 + growth * 12).toFixed(1)} –ª–µ—Ç`;
        const moodIndex = clamp(Math.floor(growth * moods.length), 0, moods.length - 1);
        moodEl.textContent = moods[moodIndex];
        stageEl.textContent = `${Math.round(growth * 100)}%`;
        hintEl.textContent = growth >= 0.98
          ? '–î–µ—Ä–µ–≤–æ –¥–æ—Å—Ç–∏–≥–ª–æ –∑—Ä–µ–ª–æ—Å—Ç–∏, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥—ã—à–∞—Ç—å –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤–µ—Ç–µ—Ä.'
          : '–ü–æ–ª–µ–π –¥–µ—Ä–µ–≤–æ, —á—Ç–æ–±—ã –¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–º–ø—É–ª—å—Å —Ä–æ—Å—Ç—É –∏ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–µ–∂–∏–µ –ª–∏—Å—Ç—å—è.';
      }

      const floatingLights = Array.from({ length: 26 }).map(() => ({
        x: Math.random(),
        y: Math.random(),
        scale: 0.5 + Math.random() * 1.5,
        speed: 0.2 + Math.random() * 0.6,
        hue: 80 + Math.random() * 40
      }));

      function drawBackground(time) {
        const gradient = ctx.createLinearGradient(0, 0, 0, height);
        const skyShift = 0.25 + Math.sin(season * 0.6) * 0.05;
        gradient.addColorStop(0, `rgba(${15 + skyShift * 120}, ${32 + skyShift * 80}, 85, 1)`);
        gradient.addColorStop(0.55, '#0a1530');
        gradient.addColorStop(1, '#040814');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, width, height);

        floatingLights.forEach((light) => {
          light.y -= (light.speed / height) * (time ? (time - lastTime) : 1);
          if (light.y < -0.05) {
            light.y = 1.05;
            light.x = Math.random();
          }
          const x = light.x * width;
          const y = light.y * height;
          ctx.beginPath();
          ctx.fillStyle = `hsla(${light.hue}, 80%, 70%, 0.35)`;
          ctx.arc(x, y, light.scale * 2.5, 0, Math.PI * 2);
          ctx.fill();
        });

        const fogGradient = ctx.createRadialGradient(
          width / 2,
          height * 0.85,
          20,
          width / 2,
          height,
          Math.max(width, height)
        );
        fogGradient.addColorStop(0, 'rgba(173, 216, 255, 0.15)');
        fogGradient.addColorStop(1, 'rgba(4, 8, 18, 0)');
        ctx.fillStyle = fogGradient;
        ctx.fillRect(0, 0, width, height);
      }

      function drawGround() {
        ctx.save();
        ctx.translate(width / 2, height - 40);
        const grd = ctx.createRadialGradient(0, 0, 50, 0, 0, Math.max(width, 400));
        grd.addColorStop(0, 'rgba(47, 93, 55, 0.8)');
        grd.addColorStop(0.6, 'rgba(21, 46, 33, 0.95)');
        grd.addColorStop(1, 'rgba(9, 16, 21, 1)');
        ctx.fillStyle = grd;
        ctx.beginPath();
        ctx.ellipse(0, 0, width * 0.55, 180, 0, 0, Math.PI, true);
        ctx.fill();
        ctx.restore();
      }

      function drawLeaf(time, branch) {
        const pulse = 1 + Math.sin(time * 0.003 + branch.seed * 10) * 0.12;
        const hue = 105 + Math.sin(season + branch.seed * 20) * 25;
        const lightness = 45 + Math.cos(season * 0.8 + branch.seed * 11) * 10;
        ctx.fillStyle = `hsla(${hue}, 62%, ${lightness}%, ${0.9 - 0.3 * (1 - growth)})`;
        ctx.beginPath();
        ctx.ellipse(0, 0, 5.2 * pulse, 11.5 * pulse, branch.seed * 40, 0, Math.PI * 2);
        ctx.fill();
      }

      function drawBranch(branch, time) {
        const depthDelay = branch.depth * GROWTH_DELAY_PER_LEVEL;
        const available = 1 - depthDelay;
        const progress = clamp((growth - depthDelay) / available, 0, 1);

        if (progress <= 0) {
          return;
        }

        const eased = easeOutCubic(progress);
        const sway = Math.sin(time * 0.0008 + branch.seed * 12.7) * (0.05 + (MAX_DEPTH - branch.depth) * 0.005) * (0.3 + growth * 0.7);
        const windGust = wind * (0.4 + branch.depth * 0.035);
        const length = branch.length * eased;

        ctx.save();
        ctx.rotate(branch.angle + sway + windGust);

        ctx.lineCap = 'round';
        ctx.lineWidth = Math.max(
          0.8,
          (MAX_DEPTH - branch.depth + 1) * 1.35 * (0.75 + 0.25 * (1 - progress))
        );

        const barkGradient = ctx.createLinearGradient(0, 0, 0, -length);
        barkGradient.addColorStop(0, 'rgba(73, 45, 30, 0.95)');
        barkGradient.addColorStop(1, branch.depth < 2 ? 'rgba(118, 84, 58, 0.9)' : 'rgba(102, 72, 48, 0.85)');
        ctx.strokeStyle = barkGradient;

        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(0, -length);
        ctx.stroke();

        ctx.translate(0, -length);

        if (branch.children.length === 0 && progress > 0.85) {
          drawLeaf(time, branch);
        } else if (progress > 0.35) {
          branch.children.forEach((child) => drawBranch(child, time));
        } else {
          // –†–∏—Å—É–µ–º –ø–æ—á–∫–∏, –µ—Å–ª–∏ –≤–µ—Ç–∫–∞ –µ—â—ë –Ω–µ —Ä–∞—Å–∫—Ä—ã–ª–∞—Å—å
          ctx.fillStyle = 'rgba(182, 255, 222, 0.4)';
          ctx.beginPath();
          ctx.arc(0, 0, 3.2, 0, Math.PI * 2);
          ctx.fill();
        }

        ctx.restore();
      }

      function drawTree(time) {
        if (!tree) return;
        ctx.save();
        ctx.translate(width / 2, height - 60);
        ctx.scale(1, 1);
        drawBranch(tree, time);
        ctx.restore();
      }

      function loop(time) {
        const delta = time - lastTime || 16;
        lastTime = time;

        growth += (targetGrowth - growth) * clamp(delta * 0.0015, 0, 0.12);
        growth = clamp(growth, 0, 1.05);

        wind += (windTarget - wind) * 0.0008 * delta;
        if (Math.random() < 0.002) {
          windTarget = (Math.random() - 0.5) * 0.8;
        }

        season += delta * 0.00002;

        ctx.clearRect(0, 0, width, height);
        drawBackground(time);
        drawGround();
        drawTree(time);
        updateHud();

        requestAnimationFrame(loop);
      }

      function scheduleGrowthPulse() {
        const nextPulse = 3000 + Math.random() * 2000;
        setTimeout(() => {
          targetGrowth = clamp(targetGrowth + 0.08 + Math.random() * 0.12, 0, 1.05);
          simulatedAge += 1;
          scheduleGrowthPulse();
        }, nextPulse);
      }

      waterBtn.addEventListener('click', () => {
        targetGrowth = clamp(targetGrowth + 0.12, 0, 1.05);
        windTarget = (Math.random() - 0.5) * 0.6;
        hintEl.textContent = '–î–µ—Ä–µ–≤–æ –≤–¥–æ—Ö–Ω—É–ª–æ –≤–ª–∞–≥—É –∏ —Ç—è–Ω–µ—Ç—Å—è –∫ —Å–≤–µ—Ç—É –µ—â–µ –±—ã—Å—Ç—Ä–µ–µ!';
      });

      scheduleGrowthPulse();
      requestAnimationFrame(loop);
    })();
  </script>
</body>
</html>
